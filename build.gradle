description = "Spock Framework support for Grails"

allprojects { project ->
  version = '0.6-SNAPSHOT'
  group = "org.spockframework"
  isSnapshot = version.endsWith("-SNAPSHOT")

  spockVersion = "0.6-groovy-1.8-SNAPSHOT"
  spockDependency = "org.spockframework:spock-core:$spockVersion"

  grailsVersion = "2.0.0.M1"
  
  groovyVersion = "1.8.1"
  groovyDependency = "org.codehaus.groovy:groovy-all:$groovyVersion"

  repositories {
    mavenRepo(name: "Spock Snapshots", urls: "http://m2repo.spockframework.org/snapshots") {
      if (project.hasProperty('snapshotTimeout')) {
          println "setting snapshot timeou"
          setSnapshotTimeout(Long.parseLong(project.snapshotTimeout))
      }
    }
    mavenRepo(name: "Grails Repo", urls: "http://repo.grails.org/grails/core") {
      if (project.hasProperty('snapshotTimeout')) {
          setSnapshotTimeout(Long.parseLong(project.snapshotTimeout))
      }
    }
  }
}

task wrapper(type: Wrapper) {
  gradleVersion = "1.0-milestone-4"
}