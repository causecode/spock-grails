description = "Spock Framework support for Grails"

allprojects { project ->
  version = '0.6-SNAPSHOT'
  group = "org.spockframework"
  isSnapshot = version.endsWith("-SNAPSHOT")
  isCiBuild = project.hasProperty("isCiBuild")

  spockVersion = "0.6-groovy-1.8-SNAPSHOT"
  spockDependency = "org.spockframework:spock-core:$spockVersion"

  grailsVersion = "2.0.0"

  groovyVersion = "1.8.4"
  groovyDependency = "org.codehaus.groovy:groovy-all:$groovyVersion"

  configurations.all {
    resolutionStrategy.cacheChangingModulesFor isCiBuild ? 0 : 24, 'hours'
  }

  repositories {
    maven { url "http://m2repo.spockframework.org/snapshots" }
    maven { url "http://repo.grails.org/grails/core" }
  }
}

task wrapper(type: Wrapper) {
  gradleVersion = "1.0-milestone-6"
}

task release(dependsOn: [":spock-grails-support:install", ":spock-grails:install"])